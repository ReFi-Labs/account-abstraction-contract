import {expect} from './chai-setup';
import {ethers} from 'hardhat';
import {

} from '../typechain';

async function sendRawTransaction(
    to: string, 
    callData: string, 
    value: string = "0", // ETH 값 (선택적)
    signer: any // 기본 서명자
) {
    // 방법 1: ethers.js 사용
    try {
        const tx = await signer.sendTransaction({
            to: to,
            data: callData,
            value: ethers.utils.parseEther(value),
            gasLimit: "10987529"
        });
        const receipt = await tx.wait();
        console.log(tx);
        // console.log("Transaction hash:", tx.hash);
        return receipt;
    } catch (error) {
        console.log(error);
    }
}

// Naming By index of handler Name (interestModel, handlerDS, proxy, siDS)
describe('[Entrypoint and simpleAccountFactory deploy and testing]', async function () {

  let users: any;

  beforeEach(async function () {
    users = await ethers.getSigners();
  });


  it("Send raw transaction test", async function() {
    const callData = "0x1fad948c0000000000000000000000000000000000000000000000000000000000000040000000000000000000000000a2c42b6da734e9f04a797d9a2d1e5c656ae98d18000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000200000000000000000000000009f8fd5a135e8091000a65a63c670451ef26c82ca000000000000000000000000000000000000000000000000000000000000000700000000000000000000000000000000000000000000000000000000000001600000000000000000000000000000000000000000000000000000000000000180000000000000000000000000000000000000000000000000000000000007a12000000000000000000000000000000000000000000000000000000000000927c000000000000000000000000000000000000000000000000000000000000052080000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003b9aca00000000000000000000000000000000000000000000000000000000000000044000000000000000000000000000000000000000000000000000000000000004600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000028418dfb3c7000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000002000000000000000000000000a5e55dcc51d8feb1348f4ad324ed9f23903c90a20000000000000000000000007aa581f22c26098c0baf6756d6a55f93439c26110000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000c00000000000000000000000000000000000000000000000000000000000000044095ea7b30000000000000000000000007aa581f22c26098c0baf6756d6a55f93439c2611000000000000000000000000000000000000000000000000000000000007a1200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c42b14dce3000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000014a340000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007a1200000000000000000000000009f8fd5a135e8091000a65a63c670451ef26c82ca0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000419860fe05954d3b50f2caa28b59f95a5df9611c40b23111c13540743fe744accc570ca64e948063b7e5c27de625f36a2d604c3ead7b829a734278949fdb7e1f181c00000000000000000000000000000000000000000000000000000000000000"
    // 트랜잭션 실행
    await sendRawTransaction(
        "0xcfB2F03F531d381e2f2f45D8DBB6474c1843Bd38", // 컨트랙트 주소
        callData,
        "0", // ETH 값 (필요한 경우)
        users[0]
    );
  });

});